<!-- ***************************
 *  The Content Heading
 * ************************** -->
 <% if (title) { %>
  <!-- If a title is provided, display an h1 heading with the title -->
  <h1><%= title %></h1>
<% } else { // If no title is provided, redirect to the home page
  res.redirect('/'); } %>

<!-- ***************************
 *  A Message Block
 * ************************** -->
<%- messages() %>

<!-- ***************************
 *  Error Message
 * ************************** -->
<% if (errors) { %>
  <ul class="notice">
    <% errors.forEach(error => { %>
      <li><%= error.msg %></li>
    <%  }) %>
  </ul>
<% } %>

<!-- Update Account Form-->
<div class="updateForm">
  <form class="update-form" action="/account/accountupdate" method="post">
    <p>* All fields are required</p>
    <fieldset class="form--fieldset update-form--fieldset">
      
      <label for="account_firstname">First name:</label>
      <input 
      type="text" 
      name="account_firstname" 
      id="account_firstname"
      placeholder="Enter your first name" 
      value="<%= locals.account_firstname %>"
      pattern="^[A-Za-z0-9\-']+$" 
      autofocus 
      required>
      
      <label for="account_lastname">Last name:</label>
      <input 
      type="text" 
      name="account_lastname" 
      id="account_lastname" 
      placeholder="Enter your last name" 
      value="<%= locals.account_lastname %>" 
      pattern="^[A-Za-z0-9\-']+$" 
      required>
      
      <label for="account_email">Email:</label>
      <input 
      type="email" 
      name="account_email" 
      id="account_email" 
      placeholder="Enter your email" 
      value="<%= locals.account_email %>" 
      pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+.\.[a-zA-Z]{2,}$" 
      required>

      <button class="updatebtn" type="submit">Update</button>

      <!-- id -->
      <input type="hidden" name="account_id"
        <% if(locals.account_id) { %>
          value="<%= locals.account_id %>"
        <% } %>>
    </fieldset>
  </form>

  <!-- password update form -->
  <form class="update-form" action="/account/changepassword" method="post">
    <p>* All fields are required</p>
    <fieldset class="form--fieldset update-form--fieldset">
      
      <label for="account_password">Password:</label>
      <input 
      type="password" 
      name="account_password" 
      id="account_password" 
      placeholder="Pick a strong password" 
      pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[?!.*@])[A-Za-z\d?!.*@]{12,}$" 
      required>
      <p>* Passwords must have a minimum of 12 characters and include 1 capital letter, 1 number, and 1 special character</p>

      <button class="updatebtn" type="submit">Change Password</button>

      <input type="hidden" name="account_id"
        <% if(locals.account_id) { %>
          value="<%= locals.account_id %>"
        <% } %>>
    </fieldset>
  </form>
</div>
<script src="/js/update.js"></script>


